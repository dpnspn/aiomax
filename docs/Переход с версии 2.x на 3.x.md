## FSM

FSM начал хранить словари как данные. Подробнее об изменившихся функциях в [FSM](FSM)

### Код бота с формой на 2.x (Устаревший)

```py
@bot.on_message(aiomax.filters.state('name'))
async def write_name(message: aiomax.Message, cursor: fsm.FSMCursor):
    await message.reply("Напишите свою фамилию")
    cursor.change_state('surname')
    cursor.change_data(message.content) # В данных хранится только одно значение

@bot.on_message(aiomax.filters.state('surname'))
async def write_surname(message: aiomax.Message, cursor: fsm.FSMCursor):
    name = cursor.get_data()
    surname = message.content

    await message.reply(f"Здравствуйте, {name} {surname}")
    cursor.clear()
```

### Код бота с формой на 3.x

```py
@bot.on_message(aiomax.filters.state('name'))
async def write_name(message: aiomax.Message, cursor: fsm.FSMCursor):
    await message.reply("Напишите свою фамилию")
    cursor.change_state('surname')
    cursor.update_data(name=message.content) # В данных может хранится несколько значений. Соответственно, можно без проблем добавлять отчество
    # Также можно написать `cursor.update_data({"name": message.content})`, или cursor.set_data с этими значениями, тк данные задаются впервые

@bot.on_message(aiomax.filters.state('surname'))
async def write_surname(message: aiomax.Message, cursor: fsm.FSMCursor):
    name = cursor.get_data('name')
    # либо name = cursor.get_data()['name']
    surname = message.content

    await message.reply(f"Здравствуйте, {name} {surname}")
    cursor.clear() # очистка данных и состояния одновременно осталась прежней
```

## Фильтры

Фильтры начали называться с большой буквы и приставки Filter. Например:

- `StateFilter` вместо `state`
- `RegexFilter` вместо `regex`
- `StartsWithFilter` вместо `startswith`
- `PapayaFilter` вместо `papaya`

> [!IMPORTANT]
> `PapayaFilter` теперь должен вызываться в отлчии от старого `papaya` (если вам он вообще зачем-то нужен)
