## FSM

FSM начал хранить словари как данные. Подробнее об изменившихся функциях в [FSM](FSM)

### Код бота с формой на 2.x

```py
import aiomax
from aiomax import fsm

bot = aiomax.Bot('TOKEN')


# Запуск бота пользователем
@bot.on_bot_start()
async def start(pd: aiomax.BotStartPayload, cursor: fsm.FSMCursor):
    await pd.send("Как Вас зовут?")
    cursor.change_state('name')


# Ввод имени
@bot.on_message(aiomax.filters.state('name'))
async def write_name(message: aiomax.Message, cursor: fsm.FSMCursor):
    await message.reply("Напишите свою фамилию")
    cursor.change_state('surname')
    cursor.change_data(message.content) # В данных хранится только одно значение

# Ввод фамилии
@bot.on_message(aiomax.filters.state('surname'))
async def write_surname(message: aiomax.Message, cursor: fsm.FSMCursor):
    name = cursor.get_data()
    surname = message.content

    await message.reply(f"Здравствуйте, {name} {surname}")
    cursor.clear()

bot.run()
```

### Код бота с формой на 3.x

```py
import aiomax
from aiomax import fsm

bot = aiomax.Bot('TOKEN')


# Запуск бота пользователем
@bot.on_bot_start()
async def start(pd: aiomax.BotStartPayload, cursor: fsm.FSMCursor):
    await pd.send("Как Вас зовут?")
    cursor.change_state('name')


# Ввод имени
@bot.on_message(aiomax.filters.state('name'))
async def write_name(message: aiomax.Message, cursor: fsm.FSMCursor):
    await message.reply("Напишите свою фамилию")
    cursor.change_state('surname')
    cursor.update_data(name=message.content) # В данных может хранится несколько значений. Соответственно, можно без проблем добавлять отчество
    # Также можно написать `cursor.update_data({"name": message.content})`, или cursor.set_data с этими значениями, тк данные задаются впервые

# Ввод фамилии
@bot.on_message(aiomax.filters.state('surname'))
async def write_surname(message: aiomax.Message, cursor: fsm.FSMCursor):
    name = cursor.get_data('name')
    # либо name = cursor.get_data()['name']
    surname = message.content

    await message.reply(f"Здравствуйте, {name} {surname}")
    cursor.clear() # очистка данных и состояния одновременно осталась прежней

bot.run()
```
